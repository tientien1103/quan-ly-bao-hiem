flowchart TD
    A[Hệ thống kiểm tra hàng ngày] --> B[Quét các phí quá hạn]
    B --> C[Lấy danh sách phí chưa thanh toán]
    C --> D[Kiểm tra từng phí]
    
    D --> E{Đã quá ngày đáo hạn?}
    E -->|Không| F[Bỏ qua, chưa quá hạn]
    E -->|Có| G[Tính số ngày quá hạn]
    
    G --> H[Tính phí trễ hạn]
    H --> I[Kiểm tra đã có record công nợ]
    
    I --> J{Đã có công nợ?}
    J -->|Có| K[Cập nhật số tiền nợ]
    J -->|Không| L[Tạo record công nợ mới]
    
    K --> M[Tính lại tổng công nợ]
    L --> M
    
    M --> N{Số ngày quá hạn}
    N -->|1-7 ngày| O[Gửi nhắc nhở email]
    N -->|8-30 ngày| P[Gửi thông báo chính thức]
    N -->|31-60 ngày| Q[Tạm dừng quyền lợi]
    N -->|61-90 ngày| R[Đình chỉ hợp đồng]
    N -->|>90 ngày| S[Chuyển thu hồi nợ]
    
    O --> T[Cập nhật trạng thái nhắc nhở]
    P --> U[Cập nhật trạng thái cảnh báo]
    Q --> V[Cập nhật trạng thái tạm dừng]
    R --> W[Cập nhật trạng thái đình chỉ]
    S --> X[Chuyển phòng pháp chế]
    
    T --> Y[Lên lịch kiểm tra tiếp theo]
    U --> Y
    V --> Y
    W --> Y
    X --> Z[Kết thúc quy trình thu hồi]
    
    Y --> AA{Khách hàng thanh toán?}
    AA -->|Có| BB[Xóa công nợ]
    AA -->|Không| CC[Tiếp tục theo dõi]
    
    BB --> DD[Khôi phục quyền lợi]
    CC --> EE[Cập nhật báo cáo công nợ]
    
    F --> FF[Tiếp tục phí tiếp theo]
    DD --> GG[Hoàn thành xử lý]
    EE --> GG
    FF --> GG
    Z --> GG